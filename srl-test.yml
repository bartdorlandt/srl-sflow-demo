# Based on https://blog.sflow.com/2021/04/containerlab.html

name: srl-test
topology:
  kinds:
    srl:
      type: ixr6
      image: registry.srlinux.dev/pub/srlinux # latest, or srlinux:21.3.1-410
      license: license.key
  nodes:
    leaf1:
      kind: srl
    leaf2:
      kind: srl
    spine1:
      kind: srl
    spine2:
      kind: srl
 
    h1:
      kind: linux
      image: alpine:latest # or frrouting/frr:latest
    h2:
      kind: linux
      image: alpine:latest
    sflow-collector: # Added
      kind: linux
      image: sflow/prometheus
  links: 
    - endpoints: ["leaf1:e1-1","spine1:e1-1"]
    - endpoints: ["leaf1:e1-2","spine2:e1-1"]
    - endpoints: ["leaf2:e1-1","spine1:e1-2"]
    - endpoints: ["leaf2:e1-2","spine2:e1-2"]
    - endpoints: ["h1:eth1","leaf1:e1-3"]
    - endpoints: ["h2:eth1","leaf2:e1-3"]
    # Connect sFlow collector to Spine #1
    - endpoints: ["sflow-collector:eth1","spine1:e1-3"]
